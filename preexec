function preexec () {
  export PREEXEC_CMD="Command: ${1:-BASH_COMMAND}"
  export PREEXEC_TIME=$(date +'%s')
}

# Before a command execution
function precmd() {
  stop=$(date +'%s')
  start=${PREEXEC_TIME:-$stop}
  let elapsed=$stop-$start
  max=${PREEXEC_MAX:-10}

  echo $elapsed
  echo $PREEXEC_CMD
  echo $1
  echo $BASH_COMMAND
  if [ $elapsed -gt $max ]; then
    $1 | growlnotify -n "iTerm" -m "took $elapsed secs" ${PREEXEC_CMD:-Some Command}
  fi  
}
